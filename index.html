<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://openmoji.org/data/color/svg/1FAB2.svg" type="image/x-icon">
    <title>.dlens to .csv Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body> 
    <!-- animated galaxy background -->
    <canvas id="bg-canvas" aria-hidden="true"></canvas>

    <div class="container">
    <h1>Database Delver Lens Converter (.dlens) to CSV</h1>
    <input type="file" id="db-upload" accept=".dlens">
    <button id="convert-btn" disabled>Convert to CSV</button>
    <div id="status">Please select a .dlens file</div>
    <div style="margin-top:12px; display:flex; gap:8px; justify-content:center;">
        <button id="howto-btn" class="secondary">How to use</button>
    </div>
    <br />
    <p style="font-size: 12px;">Coded by od3zza üëæ</p>
    <p style="font-size: 12px;">Suggestions or issues <a href="https://github.com/od3zza/delvertocsv/issues">here</a></p>
    </div>

    <div id="donation-popup" class="popup-hidden">
        <button id="close-popup-btn">&times;</button>
        
    <h3>Support this Project ‚ù§Ô∏è</h3>
    <p>If this tool was helpful to you, consider making a small donation to help keep this and others projects running.</p>
        
        <div class="progress-info">
            <span>Goal </span>
            <span id="progress-text"> $100</span>
        </div>
        <div class="progress-bar-container">
            <div id="progress-bar-fill" style="width: 14%;"></div>
        </div>
        
        <a href="https://ko-fi.com/od3zza" target="_blank" class="donate-button">
            Make a Donation
        </a>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>
    <script src="script.js"></script>
    <!-- how-to modal -->
    <div id="howto-modal" class="modal-hidden" aria-hidden="true">
        <div class="modal-backdrop"></div>
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="howto-title">
            <button id="howto-close" class="modal-close" aria-label="Close">&times;</button>
            <h2 id="howto-title">How to use</h2>
            <ol>
                <li>Open your Delver Lens app and create a backup file (<strong>Create Backup File</strong>).</li>
                <li>Download the .dlens backup and bring it here with the <strong>Select file</strong> control.</li>
                <li>Click <strong>Convert to CSV</strong>. The conversion will run in your browser and the CSV download will start automatically.</li>
            </ol>
            
        </div>
    </div>
    <footer>
           
          </footer>

</body>
</html>
